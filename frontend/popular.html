<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Anime Template">
    <meta name="keywords" content="Anime, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Anime | Todos</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="css/plyr.css" type="text/css">
    <link rel="stylesheet" href="css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">


</head>

<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Header Section Begin -->
    <header class="header">
        <div class="container">
            <div class="row">
                <div class="col-lg-2">
                    <div class="header__logo">
                        <a href="./index.html">
                            <img src="img/logo.png" alt="">
                        </a>
                    </div>
                </div>
                <div class="col-lg-8">
                    <div class="header__nav">
                        <nav class="header__menu mobile-menu">
                            <ul>
                                <li><a href="./index.html">Página Inicial</a></li>
                                <li class="active"><a href="./categories.html">Animes</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
                <div class="col-lg-2">
                    <div class="header__right">
                        <div class="dropdown">
                            <button class="dropbtn"><span class="icon_profile"></span></button>
                            <div class="dropdown-content">
                                <a class="login" href="login.html">Entrar</a>
                                <a href="signup.html">Cadastrar</a>
                                <a onclick="logout(event)" id="logout-link" style="display: none;">Logout</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="mobile-menu-wrap"></div>
        </div>
    </header>
    <!-- Header End -->

    <!-- Breadcrumb Begin -->
    <div class="breadcrumb-option">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb__links">
                        <a href="./index.html"><i class="fa fa-home"></i>Início</a>
                        <span>Top</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Breadcrumb End -->

   <!-- Product Section Begin -->
<section class="product-page spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <div class="product__page__content">
                    <div class="product__page__title">
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-6">
                                <div class="section-title">
                                    <h4>Melhor Avaliados</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="animeList" class="anime-list">
                        <!-- Produtos serão carregados aqui -->
                    </div>
                </div>
                <div class="product__pagination">
                    <a href="#" id="prevPage" class="pagination-button"><i class="fa fa-angle-left"></i></a>
                    <!-- Números de página serão gerados dinamicamente -->
                    <div id="pageNumbers"></div>
                    <a href="#" id="nextPage" class="pagination-button"><i class="fa fa-angle-right"></i></a>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 col-sm-8">
                <div class="product__sidebar">
                    <div class="product__sidebar__view">
                        <div class="section-title">
                            <h5>Recomendações</h5>
                        </div>
                        <div id="sidebarContainer" class="filter__gallery">
                            <!-- Recomendações serão carregadas aqui -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Product Section End -->


    <!-- Footer Section Begin -->
    <footer class="footer">
        <div class="page-up">
            <a href="#" id="scrollToTopButton"><span class="arrow_carrot-up"></span></a>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="footer__logo">
                        <a href="./index.html"><img src="img/logo.png" alt=""></a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="footer__nav">
                        <ul>
                            <li class="active"><a href="./index.html">Página inicial</a></li>
                            <li><a href="./categories.html">Categorias</a></li>
                            <li><a href="./blog.html">Nosso Blog</a></li>

                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- Footer Section End -->

    <!-- Search model Begin -->
    <div class="search-model">
        <div class="h-100 d-flex align-items-center justify-content-center">
            <div class="search-close-switch"><i class="icon_close"></i></div>
            <form class="search-model-form">
                <input type="text" id="search-input" placeholder="Search here.....">
            </form>
        </div>
    </div>
    <!-- Search model end -->

    <!-- Js Plugins -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/player.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/mixitup.min.js"></script>
    <script src="js/jquery.slicknav.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/main.js"></script>

    <script>
        async function searchTop() {
            var apiUrlTop = 'https://api.jikan.moe/v4/top/anime?page=1&limit=24';
            var response = await fetch(apiUrlTop);
            var data = await response.json();

            // Ordenando os animes pelo título em ordem alfabética
            var sortedAnimes = data.data

            var animeListElement = document.getElementById('animeList');
            var animeRow = document.createElement('div')
            animeRow.classList.add('row')

            sortedAnimes.forEach(function (anime, index) {
                // Criando um elemento div para cada anime
                if ((index) % 3 == 0) {
                    animeRow = document.createElement('div')
                    animeRow.classList.add('row')
                }

                var animeDiv = document.createElement('div')
                animeDiv.classList.add('col-lg-4', 'col-md-6', 'col-sm-6')

                var animeItem = document.createElement('div');
                animeItem.classList.add('product__item');
                animeDiv.appendChild(animeItem)

                // Preenchendo os elementos com os dados do anime
                var animePic = document.createElement('div');
                animePic.classList.add('product__item__pic', 'set-bg');
                animePic.style.backgroundImage = 'url(' + anime.images.webp.image_url + ')';
                animeItem.appendChild(animePic);

                var epElement = document.createElement('div');
                epElement.classList.add('ep');
                epElement.textContent = anime.episodes > 0 ? 'Eps: ' + anime.episodes : 'Eps: ?';
                animePic.appendChild(epElement);

                var commentElement = document.createElement('div');
                commentElement.classList.add('comment');
                var commentIcon = document.createElement('i');
                commentIcon.classList.add('fa', 'fa-comments');
                commentElement.appendChild(commentIcon);
                var commentsCount = document.createElement('span');
                commentsCount.classList.add('comments-count');
                commentElement.appendChild(commentsCount);
                animePic.appendChild(commentElement);

                var viewElement = document.createElement('div');
                viewElement.classList.add('view');
                var viewIcon = document.createElement('i');
                viewIcon.classList.add('fa', 'fa-eye');
                viewElement.appendChild(viewIcon);
                var viewsCount = document.createElement('span');
                viewsCount.classList.add('views-count');
                viewElement.appendChild(viewsCount);
                animePic.appendChild(viewElement);

                var textElement = document.createElement('div');
                textElement.classList.add('product__item__text');
                animeItem.appendChild(textElement);

                var ulElement = document.createElement('ul');
                textElement.appendChild(ulElement);

                var statusLi = document.createElement('li');
                statusLi.textContent = 'Status: ';
                var statusSpan = document.createElement('span');
                statusSpan.classList.add('anime-status');
                statusSpan.textContent = anime.status;
                statusLi.appendChild(statusSpan);
                ulElement.appendChild(statusLi);

                var typeLi = document.createElement('li');
                typeLi.textContent = 'Type: ';
                var typeSpan = document.createElement('span');
                typeSpan.classList.add('anime-type');
                typeSpan.textContent = anime.type;
                typeLi.appendChild(typeSpan);
                ulElement.appendChild(typeLi);

                var titleElement = document.createElement('h5');
                var titleLink = document.createElement('a');
                titleLink.classList.add('anime-title');
                titleLink.textContent = anime.title;
                titleLink.setAttribute('href', `anime-details.html?id=${anime.mal_id}`);
                titleElement.appendChild(titleLink);
                textElement.appendChild(titleElement);

                animeRow.appendChild(animeDiv)
                // Adicionando o item de anime à lista
                animeListElement.appendChild(animeRow);
            });
        }

        

        searchTop();
    </script>

<script>
    async function searchWeek1() {
        var apiUrlWeek1 = 'https://api.jikan.moe/v4/anime?min_score=8.8';
        var response = await fetch(apiUrlWeek1);
        var data = await response.json();

        // Ordenando os animes pelo título em ordem alfabética
        var sortedAnimes = data.data;

        var animeListElement = document.getElementById('sidebarContainer');

        sortedAnimes.slice(0, 18).forEach(function (anime) {

            // Preenchendo os elementos com os dados do anime
            var animePic = document.createElement('div');
            animePic.classList.add('product__sidebar__view__item', 'set-bg', 'dark-overlay', 'mix' ,`${anime.broadcast.day}`);
            animePic.style.backgroundImage = 'url(' + anime.images.webp.image_url + ')';
            animeListElement.appendChild(animePic);

            var epElement = document.createElement('div');
            epElement.classList.add('ep');
            epElement.textContent = anime.episodes > 0 ? 'Eps: ' + anime.episodes : 'Eps: ?';
            animePic.appendChild(epElement);

            var viewElement = document.createElement('div');
            viewElement.classList.add('view');
            var viewIcon = document.createElement('i');
            viewIcon.classList.add('fa', 'fa-star');
            viewIcon.innerHTML = " " + anime.score
            viewElement.appendChild(viewIcon);
            var viewsCount = document.createElement('span');
            viewsCount.classList.add('views-count');
            viewElement.appendChild(viewsCount);
            animePic.appendChild(viewElement);

            var textElement = document.createElement('div');
            textElement.classList.add('product__item__text');
            animePic.appendChild(textElement);

            var ulElement = document.createElement('ul');
            textElement.appendChild(ulElement);


            var titleElement = document.createElement('h5');
            var titleLink = document.createElement('a');
            titleLink.classList.add('anime-title');
            titleLink.textContent = anime.title;
            titleLink.setAttribute('href', `anime-details.html?id=${anime.mal_id}`);
            titleElement.appendChild(titleLink);
            textElement.appendChild(titleElement);

        });
    }

    searchWeek1();
</script>

<script>
    let currentPage = 1;
    const totalPages = 10; // Ajuste conforme necessário
    const apiBaseUrlTop = 'https://api.jikan.moe/v4/top/anime';

    async function fetchTopAnimes(page) {
        try {
            const apiUrl = `${apiBaseUrlTop}?page=${page}&limit=24`;
            const response = await fetch(apiUrl);
            const data = await response.json();
            return data.data;
        } catch (error) {
            console.error('Error fetching top animes:', error);
            return [];
        }
    }

    function updatePagination() {
        const pageNumbersElement = document.getElementById('pageNumbers');
        pageNumbersElement.innerHTML = '';
        for (let i = 1; i <= totalPages; i++) {
            const pageNumber = document.createElement('a');
            pageNumber.href = '#';
            pageNumber.textContent = i;
            pageNumber.className = i === currentPage ? 'current-page' : '';
            pageNumber.addEventListener('click', () => loadPage(i));
            pageNumbersElement.appendChild(pageNumber);
        }
        document.getElementById('prevPage').style.display = currentPage > 1 ? 'inline' : 'none';
        document.getElementById('nextPage').style.display = currentPage < totalPages ? 'inline' : 'none';
    }

    async function loadPage(page) {
        if (page < 1 || page > totalPages) return;

        currentPage = page;
        updatePagination();

        const topAnimes = await fetchTopAnimes(currentPage);
        const animeListElement = document.getElementById('animeList');
        animeListElement.innerHTML = '';

        let row;
        topAnimes.forEach((anime, index) => {
            if (index % 3 === 0) {
                row = document.createElement('div');
                row.classList.add('row');
                animeListElement.appendChild(row);
            }

            const animeDiv = document.createElement('div');
            animeDiv.classList.add('col-lg-4', 'col-md-6', 'col-sm-6');

            const animeItem = document.createElement('div');
            animeItem.classList.add('product__item');
            animeDiv.appendChild(animeItem);

            const animePic = document.createElement('div');
            animePic.classList.add('product__item__pic', 'set-bg');
            animePic.style.backgroundImage = `url(${anime.images.webp.image_url})`;
            animeItem.appendChild(animePic);

            const epElement = document.createElement('div');
            epElement.classList.add('ep');
            epElement.textContent = anime.episodes > 0 ? `Eps: ${anime.episodes}` : 'Eps: ?';
            animePic.appendChild(epElement);

            const commentElement = document.createElement('div');
            commentElement.classList.add('comment');
            const commentIcon = document.createElement('i');
            commentIcon.classList.add('fa', 'fa-star');
            commentIcon.innerHTML = " " + anime.score
            commentElement.appendChild(commentIcon);
            const commentsCount = document.createElement('span');
            commentsCount.classList.add('comments-count');
            commentElement.appendChild(commentsCount);
            animePic.appendChild(commentElement);

            const viewElement = document.createElement('div');
            viewElement.classList.add('view');
            const viewIcon = document.createElement('i');
            viewIcon.classList.add('fa');
            viewIcon.innerHTML = " Rank: " + anime.rank
            viewElement.appendChild(viewIcon);
            const viewsCount = document.createElement('span');
            viewsCount.classList.add('views-count');
            viewElement.appendChild(viewsCount);
            animePic.appendChild(viewElement);

            const textElement = document.createElement('div');
            textElement.classList.add('product__item__text');
            animeItem.appendChild(textElement);

            const ulElement = document.createElement('ul');
            textElement.appendChild(ulElement);

            const statusLi = document.createElement('li');
            statusLi.textContent = 'Status: ';
            const statusSpan = document.createElement('span');
            statusSpan.classList.add('anime-status');
            statusSpan.textContent = anime.status;
            statusLi.appendChild(statusSpan);
            ulElement.appendChild(statusLi);

            const typeLi = document.createElement('li');
            typeLi.textContent = 'Type: ';
            const typeSpan = document.createElement('span');
            typeSpan.classList.add('anime-type');
            typeSpan.textContent = anime.type;
            typeLi.appendChild(typeSpan);
            ulElement.appendChild(typeLi);

            const titleElement = document.createElement('h5');
            const titleLink = document.createElement('a');
            titleLink.classList.add('anime-title');
            titleLink.textContent = anime.title;
            titleLink.setAttribute('href', `anime-details.html?id=${anime.mal_id}`);
            titleElement.appendChild(titleLink);
            textElement.appendChild(titleElement);

            row.appendChild(animeDiv);
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        loadPage(currentPage);

        document.getElementById('prevPage').addEventListener('click', () => {
            if (currentPage > 1) {
                loadPage(currentPage - 1);
            }
        });

        document.getElementById('nextPage').addEventListener('click', () => {
            if (currentPage < totalPages) {
                loadPage(currentPage + 1);
            }
        });
    });
</script>

<script>    
    function checkLogin() {
            const userId = sessionStorage.getItem('UserId');
            const loginLink = document.querySelector('entrar');
            const signupLink = document.querySelector('signup');
            const logoutLink = document.getElementById('logout-link');

            if (userId !== null || 0) {
                if (loginLink) {
                    loginLink.style.display = 'none';
                }
                if (signupLink) {
                    signupLink.style.display = 'none';
                }
                if (logoutLink) {
                    logoutLink.style.display = 'block';
                }
            } else {
                if (loginLink) loginLink.style.display = 'block';
                if (signupLink) signupLink.style.display = 'block';
                if (logoutLink) logoutLink.style.display = 'none';
            }
        }

        document.addEventListener('DOMContentLoaded', checkLogin);

        function logout() {
            sessionStorage.removeItem('UserId');
            window.location.href = 'index.html';
        }

</script>


</body>

</html>