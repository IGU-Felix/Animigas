<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Anime Template">
    <meta name="keywords" content="Anime, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Anime | Todos</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="css/plyr.css" type="text/css">
    <link rel="stylesheet" href="css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">


</head>

<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Header Section Begin -->
    <header class="header">
        <div class="container">
            <div class="row">
                <div class="col-lg-2">
                    <div class="header__logo">
                        <a href="./index.html">
                            <img src="img/logo.png" alt="">
                        </a>
                    </div>
                </div>
                <div class="col-lg-7">
                    <div class="header__nav">
                        <nav class="header__menu mobile-menu">
                            <ul>
                                <li><a href="./index.html">Página Inicial</a></li>
                                <li class="active"><a href="./categories.html">Animes</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div id= "header__right" class="header__right">
                        <div class="dropdown">
                            <button class="dropbtn"><span class="icon_profile"></span></button>
                            <div class="dropdown-content">
                                <a id="entrar" class="login" href="login.html">Entrar</a>
                                <a id="signup" href="signup.html">Cadastrar</a>
                                <a onclick="logout(event)" id="logout-link" style="display: none;">Logout</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="mobile-menu-wrap"></div>
        </div>
    </header>
    <!-- Header End -->

    <!-- Breadcrumb Begin -->
    <div class="breadcrumb-option">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb__links">
                        <a href="./index.html"><i class="fa fa-home"></i>Início</a>
                        <span>Todos</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Breadcrumb End -->

    <!-- Product Section Begin -->
    <section class="product-page spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="product__page__content">
                        <div class="product__page__title">
                            <div class="row">
                                <div class="col-lg-6 col-md-6 col-sm-6">
                                    <div class="section-title">
                                        <h4>Todos</h4>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-4 col-sm-6">
                                    <input type="text" id="search-input" placeholder="Search here..."
                                        class="form-control" />
                                </div>
                                <div class="col-lg-2 col-md-2 col-sm-6">
                                    <button id="search-button" class="btn site-btn-2">Search</button>
                                </div>
                            </div>
                        </div>
                        <div id="animeList" class="anime-list">
                        </div>
                    </div>
                    <div class="product__pagination">
                        <a href="#" id="prevPage"><i class="fa fa-angle-left"></i></a>
                        <a href="#" id="page1" class="page-number">1</a>
                        <a href="#" id="page2" class="page-number">2</a>
                        <a href="#" id="page3" class="page-number">3</a>
                        <a href="#" id="page4" class="page-number">4</a>
                        <a href="#" id="page5" class="page-number">5</a>
                        <a href="#" id="page5" class="page-number">6</a>
                        <a href="#" id="page5" class="page-number">7</a>
                        <a href="#" id="page5" class="page-number">8</a>
                        <a href="#" id="page5" class="page-number">9</a>
                        <a href="#" id="page5" class="page-number">10</a>
                        <a href="#" id="nextPage"><i class="fa fa-angle-right"></i></a>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-8">
                    <div class="product__sidebar">
                        <div class="product__sidebar__view">
                            <div class="section-title">
                                <h5>Recomendações</h5>
                            </div>
                            <div id="sidebarContainer" class="filter__gallery">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Product Section End -->


    <!-- Footer Section Begin -->
    <footer class="footer">
        <div class="page-up">
            <a href="#" id="scrollToTopButton"><span class="arrow_carrot-up"></span></a>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="footer__logo">
                        <a href="./index.html"><img src="img/logo.png" alt=""></a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="footer__nav">
                        <ul>
                            <li class="active"><a href="./index.html">Página inicial</a></li>
                            <li><a href="./categories.html">Animes</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- Footer Section End -->

    <!-- Js Plugins -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/player.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/mixitup.min.js"></script>
    <script src="js/jquery.slicknav.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/main.js"></script>

    <script>
        async function searchWeek1() {
            var apiUrlWeek1 = 'https://api.jikan.moe/v4/anime?min_score=8.8';
            var response = await fetch(apiUrlWeek1);
            var data = await response.json();

            // Ordenando os animes pelo título em ordem alfabética
            var sortedAnimes = data.data;

            var animeListElement = document.getElementById('sidebarContainer');

            sortedAnimes.slice(0, 18).forEach(function (anime) {

                // Preenchendo os elementos com os dados do anime
                var animePic = document.createElement('div');
                animePic.classList.add('product__sidebar__view__item', 'set-bg', 'dark-overlay', 'mix', `${anime.broadcast.day}`);
                animePic.style.backgroundImage = 'url(' + anime.images.webp.image_url + ')';
                animeListElement.appendChild(animePic);

                var epElement = document.createElement('div');
                epElement.classList.add('ep');
                epElement.textContent = anime.episodes > 0 ? 'Eps: ' + anime.episodes : 'Eps: ?';
                animePic.appendChild(epElement);

                var viewElement = document.createElement('div');
                viewElement.classList.add('view');
                var viewIcon = document.createElement('i');
                viewIcon.classList.add('fa', 'fa-star');
                viewIcon.innerHTML = " " + anime.score
                viewElement.appendChild(viewIcon);
                var viewsCount = document.createElement('span');
                viewsCount.classList.add('views-count');
                viewElement.appendChild(viewsCount);
                animePic.appendChild(viewElement);

                var textElement = document.createElement('div');
                textElement.classList.add('product__item__text');
                animePic.appendChild(textElement);

                var ulElement = document.createElement('ul');
                textElement.appendChild(ulElement);


                var titleElement = document.createElement('h5');
                var titleLink = document.createElement('a');
                titleLink.classList.add('anime-title');
                titleLink.textContent = anime.title;
                titleLink.setAttribute('href', `anime-details.html?id=${anime.mal_id}`);
                titleElement.appendChild(titleLink);
                textElement.appendChild(titleElement);

            });
        }

        searchWeek1();
    </script>

    <script>
        let currentPage = 1;
        const totalPages = 10; // Ajuste conforme necessário
        const apiBaseUrl = 'https://api.jikan.moe/v4/anime';

        async function fetchAnimes(page) {
            try {
                const apiUrl = `${apiBaseUrl}?page=${page}&limit=24`;
                const response = await fetch(apiUrl);
                const data = await response.json();
                return data.data;
            } catch (error) {
                console.error('Error fetching data:', error);
                return [];
            }
        }

        function updatePagination() {
            document.querySelectorAll('.page-number').forEach((el) => {
                el.classList.toggle('current-page', parseInt(el.textContent) === currentPage);
            });
            document.getElementById('prevPage').style.display = currentPage > 1 ? 'inline' : 'none';
            document.getElementById('nextPage').style.display = currentPage < totalPages ? 'inline' : 'none';
        }

        async function loadPage(page) {
            if (page < 1 || page > totalPages) return;

            currentPage = page;
            updatePagination();

            const animes = await fetchAnimes(currentPage);
            displayAnimes(animes);
        }

        function displayAnimes(animes) {
            const animeListElement = document.getElementById('animeList');
            animeListElement.innerHTML = '';

            let row;
            animes.forEach((anime, index) => {
                if (index % 3 === 0) {
                    row = document.createElement('div');
                    row.classList.add('row');
                    animeListElement.appendChild(row);
                }

                const animeDiv = document.createElement('div');
                animeDiv.classList.add('col-lg-4', 'col-md-6', 'col-sm-6');

                const animeItem = document.createElement('div');
                animeItem.classList.add('product__item');
                animeDiv.appendChild(animeItem);

                const animePic = document.createElement('div');
                animePic.classList.add('product__item__pic', 'set-bg');
                animePic.style.backgroundImage = `url(${anime.images.webp.image_url})`;
                animeItem.appendChild(animePic);

                const epElement = document.createElement('div');
                epElement.classList.add('ep');
                epElement.textContent = anime.episodes > 0 ? `Eps: ${anime.episodes}` : 'Eps: ?';
                animePic.appendChild(epElement);

                const commentElement = document.createElement('div');
                commentElement.classList.add('comment');
                const commentIcon = document.createElement('i');
                commentIcon.classList.add('fa', 'fa-star');
                commentIcon.innerHTML = " " + anime.score;
                commentElement.appendChild(commentIcon);
                const commentsCount = document.createElement('span');
                commentsCount.classList.add('comments-count');
                commentElement.appendChild(commentsCount);
                animePic.appendChild(commentElement);

                const viewElement = document.createElement('div');
                viewElement.classList.add('view');
                const viewIcon = document.createElement('i');
                viewIcon.classList.add('fa');
                viewIcon.innerHTML = " Rank: " + anime.rank;
                viewElement.appendChild(viewIcon);
                const viewsCount = document.createElement('span');
                viewsCount.classList.add('views-count');
                viewElement.appendChild(viewsCount);
                animePic.appendChild(viewElement);

                const textElement = document.createElement('div');
                textElement.classList.add('product__item__text');
                animeItem.appendChild(textElement);

                const ulElement = document.createElement('ul');
                textElement.appendChild(ulElement);

                const statusLi = document.createElement('li');
                statusLi.textContent = 'Status: ';
                const statusSpan = document.createElement('span');
                statusSpan.classList.add('anime-status');
                statusSpan.textContent = anime.status;
                statusLi.appendChild(statusSpan);
                ulElement.appendChild(statusLi);

                const typeLi = document.createElement('li');
                typeLi.textContent = 'Type: ';
                const typeSpan = document.createElement('span');
                typeSpan.classList.add('anime-type');
                typeSpan.textContent = anime.type;
                typeLi.appendChild(typeSpan);
                ulElement.appendChild(typeLi);

                const titleElement = document.createElement('h5');
                const titleLink = document.createElement('a');
                titleLink.classList.add('anime-title');
                titleLink.textContent = anime.title;
                titleLink.setAttribute('href', `anime-details.html?id=${anime.mal_id}`);
                titleElement.appendChild(titleLink);
                textElement.appendChild(titleElement);

                row.appendChild(animeDiv);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadPage(currentPage);

            document.getElementById('prevPage').addEventListener('click', () => {
                if (currentPage > 1) {
                    loadPage(currentPage - 1);
                }
            });

            document.getElementById('nextPage').addEventListener('click', () => {
                if (currentPage < totalPages) {
                    loadPage(currentPage + 1);
                }
            });

            document.querySelectorAll('.page-number').forEach((pageNumber) => {
                pageNumber.addEventListener('click', (event) => {
                    const page = parseInt(event.target.textContent);
                    loadPage(page);
                });
            });
        });

    </script>

    <script>
        async function searchAnime(query) {
            const apiUrl = `https://api.jikan.moe/v4/anime?q=${query}&limit=24`;
            try {
                const response = await fetch(apiUrl);
                const data = await response.json();
                return data.data;
            } catch (error) {
                console.error('Error fetching data:', error);
                return [];
            }
        }

        document.getElementById('search-button').addEventListener('click', async () => {
            const query = document.getElementById('search-input').value;
            if (query) {
                const animes = await searchAnime(query);
                displayAnimes(animes);
            }
        });

    </script>

<script>    
    function checkLogin() {
            const userId = localStorage.getItem('userId');
            const loginLink = document.getElementById('entrar');
            const signupLink = document.getElementById('signup');
            const logoutLink = document.getElementById('logout-link');

            if (userId) {
                if (loginLink) {
                    loginLink.style.display = 'none';
                }
                if (signupLink) {
                    signupLink.style.display = 'none';
                }
                if (logoutLink) {
                    logoutLink.style.display = 'block';
                }
            } else {
                if (loginLink) loginLink.style.display = 'block';
                if (signupLink) signupLink.style.display = 'block';
                if (logoutLink) logoutLink.style.display = 'none';
            }
        }

        document.addEventListener('DOMContentLoaded', checkLogin);

        function logout() {
            localStorage.removeItem('userId');
            localStorage.removeItem('user')
            window.location.href = 'index.html';
        }

        function nickname() {
            const username = localStorage.getItem('user');

            if (username) {
                var header = document.getElementById('header__right');

                // Remove qualquer elemento com a classe 'nickname' existente para evitar duplicação
                var existingNickname = document.querySelector('.nickname');
                if (existingNickname) {
                    existingNickname.remove();
                }

                var namenick = document.createElement('h6');
                namenick.innerHTML = `Bem-vindo(a) - <span>${username}</span>`;
                namenick.classList.add('nickname');
                header.appendChild(namenick);
            }
}

// Execute a função após o carregamento do DOM
document.addEventListener('DOMContentLoaded', nickname);

</script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        var searchInput = document.getElementById('search-input');
        var searchButton = document.getElementById('search-button');

        searchInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault(); // Evita o comportamento padrão do Enter (submissão do formulário, por exemplo)
                searchButton.click();   // Simula o clique no botão "Search"
            }
        });
    });
</script>

</body>

</html>